<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<title>Aria: ArTCMCompassDirect Class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
<link href="tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.5.6 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li class="current"><a href="classes.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="classes.html"><span>Alphabetical&nbsp;List</span></a></li>
      <li><a href="annotated.html"><span>Class&nbsp;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&nbsp;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="contents">
<h1>ArTCMCompassDirect Class Reference</h1><!-- doxytag: class="ArTCMCompassDirect" --><!-- doxytag: inherits="ArTCM2" --><code>#include &lt;ArTCMCompassDirect.h&gt;</code>
<p>
Inherits <a class="el" href="classArTCM2.html">ArTCM2</a>.
<p>

<p>
<a href="classArTCMCompassDirect-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Talk to a compass directly over a computer serial port. 
<p>
This class configures and recieves compass heading data from a TCM2 or TCM2.5 compass directly over a computer serial port, rather than via tha robot. This class cannot recieve pitch, roll or temperature data from the compass. On all Pioneer robots, the TCM compass (as originally installed by MobileRobots) is connected to the robot microcontroller, so if you have a Pioneer with this configuration, you should instead use the <a class="el" href="classArTCMCompassRobot.html">ArTCMCompassRobot</a> class. Only use this class if you have connected the compass to the computer serial port.<p>
You can create an instance of this class directly, or using an <a class="el" href="classArCompassConnector.html">ArCompassConnector</a> object and giving the "-compassType serialtcm" program argument.<p>
If you create your own <a class="el" href="classArTCMCompassDirect.html" title="Talk to a compass directly over a computer serial port.">ArTCMCompassDirect</a> object, you must call the <a class="el" href="classArTCMCompassDirect.html#ebe52e5b8f1cdeca50c99e95e656dbcd">read()</a> method periodically (ideally at the same rate the compass sends data, approx. 8 hz by default) to read and parse incoming data. You can use an <a class="el" href="classArRobot.html" title="Central class for communicating with and operating the robot.">ArRobot</a> callback to do this, for example: <div class="fragment"><pre class="fragment">    <a class="code" href="classArRetFunctor1C.html" title="Functor for a member function with return value and 1 parameter.">ArRetFunctor1C&lt;int, ArTCMCompassDirect, unsigned int&gt;</a> compassReadFunc(myCompass, &amp;<a class="code" href="classArTCMCompassDirect.html#ebe52e5b8f1cdeca50c99e95e656dbcd">ArTCMCompassDirect::read</a>, 10);
    myRobot-&gt;addSensorInterpTask(<span class="stringliteral">"ArTCMCompassDirect read"</span>, 200, &amp;compassReadFunc);
</pre></div><p>
If you use <a class="el" href="classArCompassConnector.html">ArCompassConnector</a>, however, it will automatically do this. <table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7e96f8a437ff8c0b89c7e704db75832c"></a><!-- doxytag: member="ArTCMCompassDirect::ArTCMCompassDirect" ref="7e96f8a437ff8c0b89c7e704db75832c" args="(const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (const char *serialPortName=ARTCM2_DEFAULT_SERIAL_PORT)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cfac10ee575b3c9c56bec97ba7d8d9b1"></a><!-- doxytag: member="ArTCMCompassDirect::ArTCMCompassDirect" ref="cfac10ee575b3c9c56bec97ba7d8d9b1" args="(ArDeviceConnection *devCon)" -->
&nbsp;</td><td class="memItemRight" valign="bottom"><b>ArTCMCompassDirect</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5a8467fd6d8705e3a348f079e2b4b58f"></a><!-- doxytag: member="ArTCMCompassDirect::blockingConnect" ref="5a8467fd6d8705e3a348f079e2b4b58f" args="(unsigned long connectTimeout=5000)" -->
virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><b>blockingConnect</b> (unsigned long connectTimeout=5000)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#e86ed13fbcae5fa8e76d0e6ddc50f3fe">commandAutoCalibration</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#2419d8c6fdcca39494a579e698549cf9">commandJustCompass</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#ae038b6b57851fbf2aed64cd0c08d872">commandSoftReset</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1c53aa53dcefeab97cc94922656a0911"></a><!-- doxytag: member="ArTCMCompassDirect::commandStopCalibration" ref="1c53aa53dcefeab97cc94922656a0911" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandStopCalibration</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c7d2dec5fefcc131234af1b54819d23e"></a><!-- doxytag: member="ArTCMCompassDirect::commandUserCalibration" ref="c7d2dec5fefcc131234af1b54819d23e" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandUserCalibration</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#62383530bc16af4d2b923ebfbc98faa6">connect</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d3b610e397855e0eb59db24a6fb6d43b"></a><!-- doxytag: member="ArTCMCompassDirect::getDeviceConnetion" ref="d3b610e397855e0eb59db24a6fb6d43b" args="()" -->
<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *&nbsp;</td><td class="memItemRight" valign="bottom"><b>getDeviceConnetion</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#ebe52e5b8f1cdeca50c99e95e656dbcd">read</a> (unsigned int msWait=1)</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="915890f7feead12c8b6d4f8876685f51"></a><!-- doxytag: member="ArTCMCompassDirect::setDeviceConnection" ref="915890f7feead12c8b6d4f8876685f51" args="(ArDeviceConnection *devCon)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><b>setDeviceConnection</b> (<a class="el" href="classArDeviceConnection.html">ArDeviceConnection</a> *devCon)</td></tr>

<tr><td colspan="2"><div class="groupHeader"></div></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="classArTCMCompassDirect.html#9c392ac0c9968c0f9cdac57c547ebf61">commandContinuousPackets</a> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d10db749a3dbbb995adf91ef2cd421e8"></a><!-- doxytag: member="ArTCMCompassDirect::commandOff" ref="d10db749a3dbbb995adf91ef2cd421e8" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandOff</b> ()</td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b941b2fd233837373fceef192e0f1df"></a><!-- doxytag: member="ArTCMCompassDirect::commandOnePacket" ref="2b941b2fd233837373fceef192e0f1df" args="()" -->
virtual void&nbsp;</td><td class="memItemRight" valign="bottom"><b>commandOnePacket</b> ()</td></tr>

</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="e86ed13fbcae5fa8e76d0e6ddc50f3fe"></a><!-- doxytag: member="ArTCMCompassDirect::commandAutoCalibration" ref="e86ed13fbcae5fa8e76d0e6ddc50f3fe" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArTCMCompassDirect::commandAutoCalibration           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send commands to begin calibrating 
<p>Implements <a class="el" href="classArTCM2.html#aba360fbc82b2c25cd25a20f42e4c206">ArTCM2</a>.</p>

</div>
</div><p>
<a class="anchor" name="9c392ac0c9968c0f9cdac57c547ebf61"></a><!-- doxytag: member="ArTCMCompassDirect::commandContinuousPackets" ref="9c392ac0c9968c0f9cdac57c547ebf61" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ArTCMCompassDirect::commandContinuousPackets           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Send commands to start/stop sending data. 
<p>Implements <a class="el" href="classArTCM2.html#8b57b5ac6e217d7494cc72cfae61f171">ArTCM2</a>.</p>

</div>
</div><p>
<a class="anchor" name="2419d8c6fdcca39494a579e698549cf9"></a><!-- doxytag: member="ArTCMCompassDirect::commandJustCompass" ref="2419d8c6fdcca39494a579e698549cf9" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ArTCMCompassDirect::commandJustCompass           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Same as <a class="el" href="classArTCMCompassDirect.html#9c392ac0c9968c0f9cdac57c547ebf61">commandContinuousPackets()</a> in this implementation. 
<p>Implements <a class="el" href="classArTCM2.html#f1af3c0170ed4c7a63fa6d00ce4a8d6b">ArTCM2</a>.</p>

</div>
</div><p>
<a class="anchor" name="ae038b6b57851fbf2aed64cd0c08d872"></a><!-- doxytag: member="ArTCMCompassDirect::commandSoftReset" ref="ae038b6b57851fbf2aed64cd0c08d872" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">virtual void ArTCMCompassDirect::commandSoftReset           </td>
          <td>(</td>
          <td class="paramtype">void&nbsp;</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [inline, virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Not implemented yet. 
<p>Implements <a class="el" href="classArTCM2.html#932f31b8962d13d634e79b74337e817b">ArTCM2</a>.</p>

</div>
</div><p>
<a class="anchor" name="62383530bc16af4d2b923ebfbc98faa6"></a><!-- doxytag: member="ArTCMCompassDirect::connect" ref="62383530bc16af4d2b923ebfbc98faa6" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool ArTCMCompassDirect::connect           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Open device connection if not yet open and send commands to configure compass. 
<p>Reimplemented from <a class="el" href="classArTCM2.html#adac4c6e5254827cc598dbfab7e671fe">ArTCM2</a>.</p>

</div>
</div><p>
<a class="anchor" name="ebe52e5b8f1cdeca50c99e95e656dbcd"></a><!-- doxytag: member="ArTCMCompassDirect::read" ref="ebe52e5b8f1cdeca50c99e95e656dbcd" args="(unsigned int msWait=1)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int ArTCMCompassDirect::read           </td>
          <td>(</td>
          <td class="paramtype">unsigned int&nbsp;</td>
          <td class="paramname"> <em>msWait</em> = <code>1</code>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Read all available data, store, and call callbacks if any were added. unsigned int msWait If 0, wait indefinately for new data. Otherwise, wait a maximum of this many milliseconds for data to arrive. <dl class="return" compact><dt><b>Returns:</b></dt><dd>A value &gt; 0 if messages were recieved from the compass, 0 if no data was recieved, and a value &lt; 0 on error reading from the compass. </dd></dl>

</div>
</div><p>
<hr>The documentation for this class was generated from the following files:<ul>
<li>ArTCMCompassDirect.h<li>ArTCMCompassDirect.cpp</ul>
</div>
<hr size="1"><address style="text-align: right;"><small>Generated on Wed Aug 1 12:22:52 2012 for Aria by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.5.6 </small></address>
</body>
</html>
